<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
		<title></title>
		<style type="text/css">  
		    html{height:100%}    
		    body{height:100%;margin:0px;padding:0px}    
		    #container{height:80vh;border: solid 1px black;}    
		</style>
		<script type="text/javascript" src="https://api.map.baidu.com/api?v=1.0&&type=webgl&ak=10W14fXXO0VElPqlcgbxfGxqTBfExGlo"></script>
	</head>

	<body>
		<div id="myLocation"></div>
		<button id="btn">按钮123</button>
		<div id="container"></div> 
	</body>
	<script type="text/javascript">
			var ml = document.getElementById("myLocation");
			var btn = document.getElementById("btn");
			//创建地图实例
				var map = new BMapGL.Map("container");
			
			btn.onclick = function(){
				getUserLocation();
			}
//			10W14fXXO0VElPqlcgbxfGxqTBfExGlo
			function getUserLocation() {
				if("geolocation" in navigator) {
//					var options = {
//						enableHighAccuracy: true,
//						maximumAge: 30000,
//						timeout: 27000
//					};
					//navigator.geolocation.getCurrentPosition(success, error);
					navigator.geolocation.watchPosition(success, error, options);
				} else {
					ml.innerHTML = "您的浏览器不支持定位！";
				}
			}

			function success(position) {
				var coords = position.coords;
				var lat = coords.latitude;
				var lng = coords.longitude;
				ml.innerHTML = "您当前所在的位置：经度" + lat + ";纬度：" + lat;
				
				//设置中心点坐标
				var point = new BMapGL.Point(lat, lat);
				
				
				//地图初始化，同时设置地图展示级别
				map.centerAndZoom(point, 15); 
				map.enableScrollWheelZoom(true);     //开启鼠标滚轮缩放
				var scaleCtrl = new BMapGL.ScaleControl();  // 添加比例尺控件
				map.addControl(scaleCtrl);
				var zoomCtrl = new BMapGL.ZoomControl();  // 添加缩放控件
				map.addControl(zoomCtrl);
				var cityCtrl = new BMapGL.CityListControl();  // 添加城市列表控件
				map.addControl(cityCtrl);
			}

			function error(error) {
				switch(error.code) {
					case error.TIMEOUT:
						ml.innerHTML = "连接超时，请重试";
						break;
					case error.PERMISSION_DENIED:
						ml.innerHTML = "您拒绝了使用位置共享服务，查询已取消";
						break;
					case error.POSITION_UNAVAILABLE:
						ml.innerHTML = "亲，非常抱歉，我们暂时无法为您提供位置服务";
						break;
				}
				ml.style.color = "red";
			}
		</script>
</html>